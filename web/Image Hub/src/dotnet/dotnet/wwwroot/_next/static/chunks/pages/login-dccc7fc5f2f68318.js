(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3700:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(2592)}])},2592:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),s=n(6317),i=n(404),o=n(6226),l=n(6297),a=n(7441),c=n(4138),h=n(7547),u=n(1413),d=n(7294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},f=n(3359),g=d.forwardRef(function(e,t){return d.createElement(f.Z,(0,u.Z)((0,u.Z)({},e),{},{ref:t,icon:p}))}),x=n(1163);let y=()=>{let e=(0,x.useRouter)(),[t,n]=s.ZP.useMessage(),[u,p]=(0,d.useState)(""),[f,y]=(0,d.useState)(""),j=()=>{fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,password:f})}).then(e=>{if(200==e.status)return e.json();if(401==e.status)t.open({type:"error",content:"账户名或密码错误"});else throw Error()}).then(n=>{if(null!=n.token)t.open({type:"success",content:"登录成功"}),sessionStorage.setItem("token",n.token),e.push("/all");else throw Error()}).catch(()=>{t.open({type:"error",content:"登录失败"})})};return(0,r.jsxs)(r.Fragment,{children:[n,(0,r.jsx)(i.Z,{justify:"center",align:"middle",style:{minHeight:"100vh"},children:(0,r.jsx)(o.Z,{children:(0,r.jsxs)(l.Z,{hoverable:!0,style:{width:620},styles:{body:{padding:0,overflow:"hidden",margin:"20px"}},children:[(0,r.jsx)(i.Z,{justify:"center",style:{marginTop:"10px"},children:(0,r.jsx)("h1",{children:"Login"})}),(0,r.jsx)(i.Z,{justify:"center",style:{marginTop:"30px"},children:(0,r.jsx)(a.Z,{size:"large",placeholder:"用户名",prefix:(0,r.jsx)(h.Z,{}),style:{width:"70%"},value:u,onChange:e=>p(e.target.value)})}),(0,r.jsx)(i.Z,{justify:"center",style:{marginTop:"20px"},children:(0,r.jsx)(a.Z.Password,{size:"large",placeholder:"密码",prefix:(0,r.jsx)(g,{}),style:{width:"70%"},value:f,onChange:e=>y(e.target.value)})}),(0,r.jsx)(i.Z,{justify:"center",style:{marginTop:"30px",marginBottom:"10px"},children:(0,r.jsx)(c.ZP,{type:"primary",size:"large",shape:"round",style:{width:"150px"},onClick:j,children:"登录"})})]})})})]})};var j=y}},function(e){e.O(0,[317,297,774,888,179],function(){return e(e.s=3700)}),_N_E=e.O()}]);