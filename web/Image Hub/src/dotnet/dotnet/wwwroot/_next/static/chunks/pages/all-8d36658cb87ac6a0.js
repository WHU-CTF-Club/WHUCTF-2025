(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{145:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/all",function(){return n(4014)}])},4014:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var l=n(5893),s=n(7294),i=n(9066),o=n.n(i),r=n(1344),a=n(6317),c=n(6058),d=n(2983),h=n(4480),u=n(6793),x=n(3929),g=n(4668),j=n(8528),p=n(9361),y=n(404),Z=n(6226),v=n(6063),f=n(4407),m=n(4627),b=n(457),k=n(6309),S=n(4138),C=n(7441);let w=e=>{let{token:t}=p.Z.useToken(),n=(0,h.sJ)(u.PW),[i,o]=(0,h.FV)(u.X4),[r,a]=(0,h.FV)(u.v7),d=(0,h.sJ)(u.P),w=(0,s.useMemo)(()=>n&&n.key?n.key.toString():"",[n]);return(0,l.jsx)(c.Z.Header,{style:{position:"sticky",top:0,backgroundColor:t.colorBgContainer,zIndex:999,height:36,padding:"0 20px",lineHeight:"36px"},children:(0,l.jsxs)(y.Z,{justify:"space-between",align:"middle",style:{height:32},children:[(0,l.jsx)(Z.Z,{children:(0,l.jsxs)(v.Z,{separator:(0,l.jsx)(x.Z,{}),children:[(0,l.jsx)(v.Z.Item,{children:(0,l.jsx)(f.Z.Text,{strong:!0,children:d[w]})}),e.searchCount?(0,l.jsx)(v.Z.Item,{children:(0,l.jsxs)(f.Z.Text,{strong:!0,children:["搜索结果（",e.searchCount,"）"]})}):null]})}),(0,l.jsx)(Z.Z,{children:(0,l.jsxs)(y.Z,{gutter:[10,0],children:[(0,l.jsx)(Z.Z,{children:(0,l.jsx)(m.Z,{trigger:"click",content:(0,l.jsxs)(y.Z,{style:{width:100},gutter:[0,10],children:[(0,l.jsx)(Z.Z,{flex:1,style:{textAlign:"center"},children:(0,l.jsx)(b.ZP.Group,{optionType:"button",size:"small",value:i,onChange:e=>o(e.target.value),buttonStyle:"solid",options:[{label:"升序",value:"asc"},{label:"降序",value:"desc"}]})}),(0,l.jsx)(Z.Z,{flex:1,children:(0,l.jsx)(k.Z,{size:"small",style:{width:100},value:r,onChange:a,placeholder:"排序方式",options:[{value:"Id",label:"编号"},{value:"timeStamp",label:"创建日期"},{value:"size",label:"文件大小"}]})})]}),children:(0,l.jsx)(S.ZP,{icon:(0,l.jsx)(g.Z,{rotate:90}),type:"text",size:"small"})})}),(0,l.jsx)(Z.Z,{children:(0,l.jsx)(C.Z,{placeholder:"回车开始搜索",size:"small",prefix:(0,l.jsx)(j.Z,{}),onPressEnter:t=>(null==e?void 0:e.onSearch)&&e.onSearch(t.target.value)})})]})})]})})};var _=n(6297),P=n(5675),E=n.n(P),T=n(1163);let z=e=>{let{layoutPos:t,data:n,onLoadmore:s,loading:i}=e,[o,a]=(0,h.FV)(u.Tm),{token:d}=p.Z.useToken(),x=(0,h.sJ)(u.A0),g=(0,T.useRouter)(),j=g.route.replace("/",""),y=x[j]>n.length&&(0,l.jsx)("div",{style:{textAlign:"center"},children:(0,l.jsx)(S.ZP,{onClick:s,type:"link",disabled:i,children:"加载更多"})});return n&&t?(0,l.jsxs)(c.Z.Content,{style:{position:"relative"},children:[(0,l.jsx)("div",{style:{height:t.containerHeight},children:t.boxes.map((e,t)=>{let s=n[t];return(0,l.jsx)(_.Z,{hoverable:!0,style:{...e,position:"absolute",overflow:"hidden",...(null==o?void 0:o.id)===s.id?{outline:"4px solid ".concat(d.colorPrimary),border:0}:{}},bodyStyle:{padding:0,...e},onClick:()=>a(n[t]),children:(0,l.jsx)(E(),{priority:!0,width:0,height:0,loader:r.XI,src:(0,r.yR)(s,!0),alt:"".concat(s.name),style:{width:"100%",height:"100%"}})},s.id)})}),(0,l.jsx)("div",{style:{paddingBottom:20},children:y})]}):null},I=()=>{let e=(0,T.useRouter)(),[t,n]=(0,h.FV)(u.A0),[i,x]=(0,s.useState)(!1),[g,j]=(0,s.useState)(),[p,y]=(0,s.useState)(1),[Z,v]=(0,s.useState)([]),f=(0,h.sJ)(u.v7),m=(0,h.sJ)(u.X4),[b,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(0),[_,P]=a.ZP.useMessage();(0,s.useEffect)(()=>{null==sessionStorage.getItem("token")&&(_.open({type:"error",content:"请先登录"}),setTimeout(()=>{e.push("/login")},1500))},[]),(0,s.useEffect)(()=>{E(1,"",e=>{n({...t,all:e})})},[f,m]);let E=(e,t,n)=>{x(!0),1===e&&j(void 0),(0,r.MZ)({page:e,sort:f,order:m,rules:t}).then(e=>e.json()).then(t=>{let l=Number(t.totalCount);n&&n(l),v(1===e?t.images:e=>e.concat(t)),y(e),x(!1)}).catch(e=>{_.open({type:"error",content:"图片获取失败"})})};return(0,s.useEffect)(()=>{Z.length&&j(o()([...Z],{containerWidth:document.body.clientWidth-480,targetRowHeight:260,boxSpacing:{horizontal:10,vertical:20}}))},[Z]),(0,l.jsxs)(c.Z,{style:{height:"100%"},children:[P,(0,l.jsx)(w,{onSearch(e){let t=e?"".concat(e):"";E(1,t),k(t)},searchCount:S}),Z.length>0?(0,l.jsx)(z,{layoutPos:g,data:Z,onLoadmore:()=>E(p+1,b),loading:i}):(0,l.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(d.Z,{})})]})};var N=I}},function(e){e.O(0,[317,297,218,774,888,179],function(){return e(e.s=145)}),_N_E=e.O()}]);